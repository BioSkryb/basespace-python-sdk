

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>BaseSpacePy.api.BaseSpaceAPI &mdash; BaseSpacePy 0.1 documentation</title>
    
    <link rel="stylesheet" href="../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="top" title="BaseSpacePy 0.1 documentation" href="../../../index.html" />
    <link rel="up" title="Module code" href="../../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="../../../index.html">BaseSpacePy 0.1 documentation</a> &raquo;</li>
          <li><a href="../../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for BaseSpacePy.api.BaseSpaceAPI</h1><div class="highlight"><pre>
<span class="c">#!/usr/bin/env python</span>
<span class="c">#import sys</span>
<span class="c">#sys.path.append(&#39;/home/mkallberg/workspace/BaseSpacePy_v0.1/src/&#39;)</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>
<span class="kn">import</span> <span class="nn">urllib2</span>
<span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">import</span> <span class="nn">urllib</span>
<span class="kn">import</span> <span class="nn">pycurl</span>
<span class="kn">import</span> <span class="nn">httplib</span>
<span class="kn">import</span> <span class="nn">cStringIO</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="kn">from</span> <span class="nn">BaseSpacePy.api.APIClient</span> <span class="kn">import</span> <span class="n">APIClient</span>
<span class="kn">from</span> <span class="nn">BaseSpacePy.api.BaseSpaceException</span> <span class="kn">import</span> <span class="o">*</span> <span class="c">#@UnusedWildImport</span>
<span class="kn">from</span> <span class="nn">BaseSpacePy.model.MultipartUpload</span> <span class="kn">import</span> <span class="n">MultipartUpload</span> <span class="k">as</span> <span class="n">mpu</span> <span class="c">#@UnresolvedImport</span>
<span class="kn">from</span> <span class="nn">BaseSpacePy.model.QueryParameters</span> <span class="kn">import</span> <span class="n">QueryParameters</span> <span class="k">as</span> <span class="n">qp</span> <span class="c">#@UnresolvedImport</span>
<span class="kn">from</span> <span class="nn">BaseSpacePy.model</span> <span class="kn">import</span> <span class="o">*</span> <span class="c">#@UnusedWildImport</span>

<span class="c"># Uris for obtaining a access token, user verification code, and app trigger information</span>
<span class="n">tokenURL</span>                   <span class="o">=</span> <span class="s">&#39;oauthv2/token&#39;</span>
<span class="n">deviceURL</span>                  <span class="o">=</span> <span class="s">&quot;oauthv2/deviceauthorization&quot;</span>
<span class="n">webAuthorize</span>               <span class="o">=</span> <span class="s">&#39;oauth/authorize&#39;</span>


<div class="viewcode-block" id="BaseSpaceAPI"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI">[docs]</a><span class="k">class</span> <span class="nc">BaseSpaceAPI</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    The main API class used for all communication with with the REST server</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clientKey</span><span class="p">,</span> <span class="n">clientSecret</span><span class="p">,</span> <span class="n">apiServer</span><span class="p">,</span> <span class="n">version</span><span class="p">,</span> <span class="n">appSessionId</span><span class="p">,</span> <span class="n">AccessToken</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">apiServer</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="s">&#39;/&#39;</span><span class="p">:</span> <span class="n">apiServer</span> <span class="o">=</span> <span class="n">apiServer</span> <span class="o">+</span> <span class="s">&#39;/&#39;</span>
        <span class="c">#if not version[-1]==&#39;/&#39;: version = version + &#39;/&#39;</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">appSessionId</span>   <span class="o">=</span> <span class="n">appSessionId</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">key</span>            <span class="o">=</span> <span class="n">clientKey</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">secret</span>         <span class="o">=</span> <span class="n">clientSecret</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">apiServer</span>      <span class="o">=</span> <span class="n">apiServer</span> <span class="o">+</span> <span class="n">version</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weburl</span>         <span class="o">=</span> <span class="n">apiServer</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;api.&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setAccessToken</span><span class="p">(</span><span class="n">AccessToken</span><span class="p">)</span>        <span class="c"># logic for setting the access-token </span>

    <span class="k">def</span> <span class="nf">__updateAccessToken__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">AccessToken</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">apiClient</span><span class="o">.</span><span class="n">apiKey</span> <span class="o">=</span> <span class="n">AccessToken</span>

    <span class="k">def</span> <span class="nf">setAccessToken</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">token</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">apiClient</span>      <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="n">token</span><span class="p">:</span> 
            <span class="n">apiClient</span> <span class="o">=</span> <span class="n">APIClient</span><span class="p">(</span><span class="n">AccessToken</span><span class="o">=</span><span class="n">token</span><span class="p">,</span><span class="n">apiServer</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">apiServer</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">apiClient</span> <span class="o">=</span> <span class="n">apiClient</span>

    <span class="k">def</span> <span class="nf">__singleRequest__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">myModel</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span><span class="n">postData</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">forcePost</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">noAPI</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="c"># test if access-token has been set</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">apiClient</span> <span class="ow">and</span> <span class="n">noAPI</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">&#39;Access-token not set, use the &quot;setAccessToken&quot;-method to supply a token value&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span> <span class="k">print</span> <span class="s">&quot;    # &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">resourcePath</span><span class="p">)</span>
        
        <span class="c"># Make the API Call</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apiClient</span><span class="o">.</span><span class="n">callAPI</span><span class="p">(</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span><span class="n">postData</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span><span class="n">forcePost</span><span class="o">=</span><span class="n">forcePost</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span> 
            <span class="k">print</span> <span class="s">&quot;    # &quot;</span>
            <span class="k">print</span> <span class="s">&quot;    # forcePost: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">forcePost</span><span class="p">)</span> 
            <span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">response</span><span class="p">:</span> 
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">&#39;BaseSpace error: None response returned&#39;</span><span class="p">)</span>
        
        <span class="c"># throw exception here for various error messages</span>
        <span class="k">if</span> <span class="n">response</span><span class="p">[</span><span class="s">&#39;ResponseStatus&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="s">&#39;ErrorCode&#39;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">&#39;BaseSpace error: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="s">&#39;ResponseStatus&#39;</span><span class="p">][</span><span class="s">&#39;ErrorCode&#39;</span><span class="p">])</span> <span class="o">+</span> <span class="s">&quot;: &quot;</span> <span class="o">+</span> <span class="n">response</span><span class="p">[</span><span class="s">&#39;ResponseStatus&#39;</span><span class="p">][</span><span class="s">&#39;Message&#39;</span><span class="p">])</span>
         
        <span class="c"># Create output objects if the response has more than one object</span>
        <span class="n">responseObject</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apiClient</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">response</span><span class="p">,</span><span class="n">myModel</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">responseObject</span><span class="o">.</span><span class="n">Response</span>

    <span class="k">def</span> <span class="nf">__listRequest__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">myModel</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">noAPI</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="c"># test if access-token has been set</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">apiClient</span> <span class="ow">and</span> <span class="n">noAPI</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">&#39;Access-token not set, use the &quot;setAccessToken&quot;-method to supply a token value&#39;</span><span class="p">)</span>
        
        <span class="c"># Make the API Call</span>
        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span> 
            <span class="k">print</span> <span class="s">&#39;    # Path: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">resourcePath</span><span class="p">)</span>
            <span class="k">print</span> <span class="s">&#39;    # Pars: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">queryParams</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apiClient</span><span class="o">.</span><span class="n">callAPI</span><span class="p">(</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">response</span><span class="p">:</span> 
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">&#39;BaseSpace Exception: No data returned&#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span> 
            <span class="k">print</span> <span class="s">&#39;    # response: &#39;</span> 
            <span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span> <span class="n">response</span> <span class="o">=</span> <span class="p">[</span><span class="n">response</span><span class="p">]</span>
        <span class="n">responseObjects</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">responseObject</span> <span class="ow">in</span> <span class="n">response</span><span class="p">:</span>
            <span class="n">responseObjects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">apiClient</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">responseObject</span><span class="p">,</span> <span class="n">ListResponse</span><span class="o">.</span><span class="n">ListResponse</span><span class="p">))</span>
        
        <span class="c"># convert list response dict to object type</span>
        <span class="n">convertet</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">apiClient</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">myModel</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">responseObjects</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">convertToObjectList</span><span class="p">()]</span>
<span class="c">#        print response </span>
        <span class="k">return</span> <span class="n">convertet</span>
    <span class="c"># test if </span>

    <span class="k">def</span> <span class="nf">__makeCurlRequest__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
        <span class="n">post</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">urlencode</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">cStringIO</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">pycurl</span><span class="o">.</span><span class="n">Curl</span><span class="p">()</span>
        <span class="n">c</span><span class="o">.</span><span class="n">setopt</span><span class="p">(</span><span class="n">pycurl</span><span class="o">.</span><span class="n">URL</span><span class="p">,</span><span class="n">url</span><span class="p">)</span>
        <span class="n">c</span><span class="o">.</span><span class="n">setopt</span><span class="p">(</span><span class="n">pycurl</span><span class="o">.</span><span class="n">POST</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">c</span><span class="o">.</span><span class="n">setopt</span><span class="p">(</span><span class="n">pycurl</span><span class="o">.</span><span class="n">POSTFIELDS</span><span class="p">,</span> <span class="n">post</span><span class="p">)</span>
        <span class="n">c</span><span class="o">.</span><span class="n">setopt</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">WRITEFUNCTION</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">write</span><span class="p">)</span>
        <span class="n">c</span><span class="o">.</span><span class="n">perform</span><span class="p">()</span>
        <span class="n">c</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">getvalue</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="s">&#39;error&#39;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">&quot;BaseSpace exception: &quot;</span> <span class="o">+</span> <span class="n">obj</span><span class="p">[</span><span class="s">&#39;error&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s">&quot; - &quot;</span> <span class="o">+</span> <span class="n">obj</span><span class="p">[</span><span class="s">&#39;error_description&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">obj</span>
      
    <span class="k">def</span> <span class="nf">__getTriggerObject__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">obj</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Warning this method is not for general use and should only be called </span>
<span class="sd">        from the getAppSession.</span>
<span class="sd">        :param obj: The appTrigger json </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">obj</span>
        <span class="k">if</span> <span class="n">response</span><span class="p">[</span><span class="s">&#39;ResponseStatus&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="s">&#39;ErrorCode&#39;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">&#39;BaseSpace error: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="s">&#39;ResponseStatus&#39;</span><span class="p">][</span><span class="s">&#39;ErrorCode&#39;</span><span class="p">])</span> <span class="o">+</span> <span class="s">&quot;: &quot;</span> <span class="o">+</span> <span class="n">response</span><span class="p">[</span><span class="s">&#39;ResponseStatus&#39;</span><span class="p">][</span><span class="s">&#39;Message&#39;</span><span class="p">])</span>
        <span class="n">tempApi</span>   <span class="o">=</span> <span class="n">APIClient</span><span class="p">(</span><span class="n">AccessToken</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">apiServer</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">apiServer</span><span class="p">)</span>
        <span class="n">response</span>  <span class="o">=</span> <span class="n">tempApi</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">AppSessionResponse</span><span class="o">.</span><span class="n">AppSessionResponse</span><span class="p">)</span> <span class="c">#@UndefinedVariable</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">Response</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">__serializeReferences__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
    
    <span class="k">def</span> <span class="nf">__serializeObject__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="nb">type</span><span class="p">):</span>
        <span class="n">tempApi</span>   <span class="o">=</span> <span class="n">APIClient</span><span class="p">(</span><span class="n">AccessToken</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">apiServer</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">apiServer</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">==</span><span class="s">&#39;project&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">tempApi</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">Project</span><span class="o">.</span><span class="n">Project</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">==</span><span class="s">&#39;sample&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">tempApi</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">Sample</span><span class="o">.</span><span class="n">Sample</span><span class="p">)</span>        
        <span class="k">return</span> <span class="n">d</span>
        
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&quot;BaseSpaceAPI instance - using token=&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">getAccessToken</span><span class="p">()</span>
    
    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  

<div class="viewcode-block" id="BaseSpaceAPI.getAppSession"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getAppSession">[docs]</a>    <span class="k">def</span> <span class="nf">getAppSession</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Id</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns an AppSession instance containing user and data-type the app was triggered by/on </span>
<span class="sd">        :param Id: (Optional) The AppSessionId, id not supplied the AppSessionId used for instantiating</span>
<span class="sd">        the BaseSpaceAPI instance.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apiServer</span> <span class="o">+</span> <span class="s">&#39;appsessions/{AppSessionId}&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">Id</span><span class="p">:</span>
            <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{AppSessionId}&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">appSessionId</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{AppSessionId}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>
<span class="c">#        print resourcePath</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">cStringIO</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">pycurl</span><span class="o">.</span><span class="n">Curl</span><span class="p">()</span>
        <span class="n">c</span><span class="o">.</span><span class="n">setopt</span><span class="p">(</span><span class="n">pycurl</span><span class="o">.</span><span class="n">URL</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">)</span>
        <span class="n">c</span><span class="o">.</span><span class="n">setopt</span><span class="p">(</span><span class="n">pycurl</span><span class="o">.</span><span class="n">USERPWD</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">key</span> <span class="o">+</span> <span class="s">&quot;:&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">secret</span><span class="p">)</span>
        <span class="n">c</span><span class="o">.</span><span class="n">setopt</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">WRITEFUNCTION</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">write</span><span class="p">)</span>
        <span class="n">c</span><span class="o">.</span><span class="n">perform</span><span class="p">()</span>
        <span class="n">c</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">getvalue</span><span class="p">())</span>
<span class="c">#        pprint(obj)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__getTriggerObject__</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> 
</div>
<div class="viewcode-block" id="BaseSpaceAPI.getVerificationCode"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getVerificationCode">[docs]</a>    <span class="k">def</span> <span class="nf">getVerificationCode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">scope</span><span class="p">,</span><span class="n">device</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">redirect</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns the BaseSpace dictionary containing the verification code and verification url for the user to approve</span>
<span class="sd">        access to a specific data scope.  </span>
<span class="sd">        </span>
<span class="sd">        Corresponding curl call:</span>
<span class="sd">        curlCall = &#39;curl -d &quot;response_type=device_code&quot; -d &quot;client_id=&#39; + client_key + &#39;&quot; -d &quot;scope=&#39; + scope + &#39;&quot; &#39; + deviceURL</span>
<span class="sd">        </span>
<span class="sd">        For details see:</span>
<span class="sd">        https://developer.basespace.illumina.com/docs/content/documentation/authentication/obtaining-access-tokens</span>
<span class="sd">            </span>
<span class="sd">        :param scope: The scope that access is requested for</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;client_id&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">),(</span><span class="s">&#39;scope&#39;</span><span class="p">,</span> <span class="n">scope</span><span class="p">),(</span><span class="s">&#39;response_type&#39;</span><span class="p">,</span><span class="s">&#39;device_code&#39;</span><span class="p">)]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__makeCurlRequest__</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">apiServer</span> <span class="o">+</span> <span class="n">deviceURL</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BaseSpaceAPI.getWebVerificationCode"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getWebVerificationCode">[docs]</a>    <span class="k">def</span> <span class="nf">getWebVerificationCode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">scope</span><span class="p">,</span><span class="n">redirectURL</span><span class="p">,</span><span class="n">state</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Generates the URL the user should be redirected to for web-based authentication</span>
<span class="sd">         </span>
<span class="sd">        :param scope: The scope that access is requested for</span>
<span class="sd">        :param redirectURL: The redirect URL</span>
<span class="sd">        :state: An optional state paramter that will passed through to redirect response</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;client_id&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">,</span><span class="s">&#39;redirect_uri&#39;</span><span class="p">:</span><span class="n">redirectURL</span><span class="p">,</span><span class="s">&#39;scope&#39;</span><span class="p">:</span><span class="n">scope</span><span class="p">,</span><span class="s">&#39;response_type&#39;</span><span class="p">:</span><span class="s">&#39;code&#39;</span><span class="p">,</span><span class="s">&quot;state&quot;</span><span class="p">:</span><span class="n">state</span><span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">weburl</span> <span class="o">+</span> <span class="n">webAuthorize</span> <span class="o">+</span> <span class="s">&#39;?&#39;</span> <span class="o">+</span> <span class="n">urllib</span><span class="o">.</span><span class="n">urlencode</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BaseSpaceAPI.obtainAccessToken"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.obtainAccessToken">[docs]</a>    <span class="k">def</span> <span class="nf">obtainAccessToken</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">deviceCode</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns a user specific access token.    </span>
<span class="sd">        :param deviceCode: The device code returned by the verification code method</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;client_id&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">),(</span><span class="s">&#39;client_secret&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">secret</span><span class="p">),(</span><span class="s">&#39;code&#39;</span><span class="p">,</span><span class="n">deviceCode</span><span class="p">),(</span><span class="s">&#39;grant_type&#39;</span><span class="p">,</span><span class="s">&#39;device&#39;</span><span class="p">),(</span><span class="s">&#39;redirect_uri&#39;</span><span class="p">,</span><span class="s">&#39;google.com&#39;</span><span class="p">)]</span>
        <span class="nb">dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__makeCurlRequest__</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">apiServer</span> <span class="o">+</span> <span class="n">tokenURL</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">[</span><span class="s">&#39;access_token&#39;</span><span class="p">]</span>
</div>
    <span class="k">def</span> <span class="nf">updatePrivileges</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">code</span><span class="p">):</span>
        <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obtainAccessToken</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setAccessToken</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
            
<div class="viewcode-block" id="BaseSpaceAPI.getAccessToken"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getAccessToken">[docs]</a>    <span class="k">def</span> <span class="nf">getAccessToken</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns the access-token that was used to initialize the BaseSpaceAPI object.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">apiClient</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apiClient</span><span class="o">.</span><span class="n">apiKey</span>
        <span class="k">return</span> <span class="s">&quot;&quot;</span>
    </div>
<div class="viewcode-block" id="BaseSpaceAPI.getServerUri"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getServerUri">[docs]</a>    <span class="k">def</span> <span class="nf">getServerUri</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns the server uri used by this instance</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apiClient</span><span class="o">.</span><span class="n">apiServer</span>
</div>
<div class="viewcode-block" id="BaseSpaceAPI.getUserById"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getUserById">[docs]</a>    <span class="k">def</span> <span class="nf">getUserById</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns the User object corresponding to Id</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The Id of the user</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c"># Parse inputs</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/users/{Id}&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{format}&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">UserResponse</span><span class="o">.</span><span class="n">UserResponse</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">)</span>
           </div>
<div class="viewcode-block" id="BaseSpaceAPI.getAppResultById"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getAppResultById">[docs]</a>    <span class="k">def</span> <span class="nf">getAppResultById</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns an Analysis object corresponding to Id</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The Id of the Analysis</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c"># Parse inputs</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/appresults/{Id}&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{format}&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">AppResultResponse</span><span class="o">.</span><span class="n">AppResultResponse</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BaseSpaceAPI.getAppResultFiles"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getAppResultFiles">[docs]</a>    <span class="k">def</span> <span class="nf">getAppResultFiles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">queryPars</span><span class="o">=</span><span class="n">qp</span><span class="p">()):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns a list of File object for the Analysis with id  = Id</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The id of the appresult.</span>
<span class="sd">        :param queryPars: An (optional) object of type QueryParameters for custom sorting and filtering </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c"># Parse inputs</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/appresults/{Id}/files&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{format}&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">queryPars</span><span class="o">.</span><span class="n">validate</span><span class="p">()</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="n">queryPars</span><span class="o">.</span><span class="n">getParameterDict</span><span class="p">()</span>
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span><span class="n">Id</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__listRequest__</span><span class="p">(</span><span class="n">File</span><span class="o">.</span><span class="n">File</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BaseSpaceAPI.getProjectById"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getProjectById">[docs]</a>    <span class="k">def</span> <span class="nf">getProjectById</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Request a project object by Id</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The Id of the project</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c"># Parse inputs</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/projects/{Id}&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{format}&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">ProjectResponse</span><span class="o">.</span><span class="n">ProjectResponse</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">)</span>
           </div>
<div class="viewcode-block" id="BaseSpaceAPI.getProjectByUser"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getProjectByUser">[docs]</a>    <span class="k">def</span> <span class="nf">getProjectByUser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">queryPars</span><span class="o">=</span><span class="n">qp</span><span class="p">()):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns a list available projects for a User with the specified Id</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The id of the user</span>
<span class="sd">        :param qp: An (optional) object of type QueryParameters for custom sorting and filtering</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c"># Parse inputs</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/users/{Id}/projects&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{format}&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">queryPars</span><span class="o">.</span><span class="n">validate</span><span class="p">()</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="n">queryPars</span><span class="o">.</span><span class="n">getParameterDict</span><span class="p">()</span>
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">Id</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span> <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__listRequest__</span><span class="p">(</span><span class="n">Project</span><span class="o">.</span><span class="n">Project</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">)</span>
       </div>
<div class="viewcode-block" id="BaseSpaceAPI.getAccessibleRunsByUser"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getAccessibleRunsByUser">[docs]</a>    <span class="k">def</span> <span class="nf">getAccessibleRunsByUser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">queryPars</span><span class="o">=</span><span class="n">qp</span><span class="p">()):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns a list of accessible runs for the User with id=Id</span>
<span class="sd">        </span>
<span class="sd">        :param Id: An user id</span>
<span class="sd">        :param queryPars: An (optional) object of type QueryParameters for custom sorting and filtering</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c"># Parse inputs</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/users/{Id}/runs&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{format}&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">queryPars</span><span class="o">.</span><span class="n">validate</span><span class="p">()</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="n">queryPars</span><span class="o">.</span><span class="n">getParameterDict</span><span class="p">()</span>
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span><span class="n">Id</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__listRequest__</span><span class="p">(</span><span class="n">RunCompact</span><span class="o">.</span><span class="n">RunCompact</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">)</span>
    </div>
<div class="viewcode-block" id="BaseSpaceAPI.getAppResultsByProject"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getAppResultsByProject">[docs]</a>    <span class="k">def</span> <span class="nf">getAppResultsByProject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">queryPars</span><span class="o">=</span><span class="n">qp</span><span class="p">(),</span><span class="n">statuses</span><span class="o">=</span><span class="p">[]):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns a list of Analysis object associated with the project with Id</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The project id</span>
<span class="sd">        :param queryPars: An (optional) object of type QueryParameters for custom sorting and filtering</span>
<span class="sd">        :param statuses: An (optional) list of AppResult statuses to filter by</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c"># Parse inputs</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/projects/{Id}/appresults&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{format}&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">queryPars</span><span class="o">.</span><span class="n">validate</span><span class="p">()</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="n">queryPars</span><span class="o">.</span><span class="n">getParameterDict</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">statuses</span><span class="p">):</span> <span class="n">queryParams</span><span class="p">[</span><span class="s">&#39;Statuses&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">statuses</span><span class="p">)</span>
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span><span class="n">Id</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__listRequest__</span><span class="p">(</span><span class="n">AppResult</span><span class="o">.</span><span class="n">AppResult</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BaseSpaceAPI.getSamplesByProject"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getSamplesByProject">[docs]</a>    <span class="k">def</span> <span class="nf">getSamplesByProject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">queryPars</span><span class="o">=</span><span class="n">qp</span><span class="p">()):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns a list of samples associated with a project with Id</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The id of the project</span>
<span class="sd">        :param queryPars: An (optional) object of type QueryParameters for custom sorting and filtering</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c"># Parse inputs</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/projects/{Id}/samples&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{format}&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">queryPars</span><span class="o">.</span><span class="n">validate</span><span class="p">()</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="n">queryPars</span><span class="o">.</span><span class="n">getParameterDict</span><span class="p">()</span>
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span><span class="n">Id</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__listRequest__</span><span class="p">(</span><span class="n">Sample</span><span class="o">.</span><span class="n">Sample</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BaseSpaceAPI.getSampleById"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getSampleById">[docs]</a>    <span class="k">def</span> <span class="nf">getSampleById</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns a Sample object</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The id of the sample</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c"># Parse inputs</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/samples/{Id}&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{format}&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">SampleResponse</span><span class="o">.</span><span class="n">SampleResponse</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BaseSpaceAPI.getFilesBySample"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getFilesBySample">[docs]</a>    <span class="k">def</span> <span class="nf">getFilesBySample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">queryPars</span><span class="o">=</span><span class="n">qp</span><span class="p">()):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns a list of File objects associated with sample with Id</span>
<span class="sd">        </span>
<span class="sd">        :param Id: A Sample id</span>
<span class="sd">        :param queryPars: An (optional) object of type QueryParameters for custom sorting and filtering</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c"># Parse inputs</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/samples/{Id}/files&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{format}&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">queryPars</span><span class="o">.</span><span class="n">validate</span><span class="p">()</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="n">queryPars</span><span class="o">.</span><span class="n">getParameterDict</span><span class="p">()</span>
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span><span class="n">Id</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__listRequest__</span><span class="p">(</span><span class="n">File</span><span class="o">.</span><span class="n">File</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    </div>
<div class="viewcode-block" id="BaseSpaceAPI.getFileById"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getFileById">[docs]</a>    <span class="k">def</span> <span class="nf">getFileById</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns a file object by Id</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The id of the file</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c"># Parse inputs</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/files/{Id}&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{format}&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">FileResponse</span><span class="o">.</span><span class="n">FileResponse</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span>\
                                      <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BaseSpaceAPI.getGenomeById"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getGenomeById">[docs]</a>    <span class="k">def</span> <span class="nf">getGenomeById</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns an instance of Genome with the specified Id</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The genome id</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c"># Parse inputs</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/genomes/{Id}&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{format}&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">GenomeResponse</span><span class="o">.</span><span class="n">GenomeResponse</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BaseSpaceAPI.getAvailableGenomes"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getAvailableGenomes">[docs]</a>    <span class="k">def</span> <span class="nf">getAvailableGenomes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queryPars</span><span class="o">=</span><span class="n">qp</span><span class="p">()):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns a list of all available genomes</span>
<span class="sd">        </span>
<span class="sd">        :param queryPars: An (optional) object of type QueryParameters for custom sorting and filtering</span>
<span class="sd">        &#39;&#39;&#39;</span>
        
        <span class="c"># Parse inputs</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/genomes&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{format}&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">queryPars</span><span class="o">.</span><span class="n">validate</span><span class="p">()</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="n">queryPars</span><span class="o">.</span><span class="n">getParameterDict</span><span class="p">()</span>
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__listRequest__</span><span class="p">(</span><span class="n">GenomeV1</span><span class="o">.</span><span class="n">GenomeV1</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    
    <span class="c"># TODO, needs more work in parsing meta data, currently only map keys are returned </span>
    </div>
<div class="viewcode-block" id="BaseSpaceAPI.getVariantMetadata"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getVariantMetadata">[docs]</a>    <span class="k">def</span> <span class="nf">getVariantMetadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">Format</span><span class="p">,):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns a VariantMetadata object for the variant file</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The Id of the VCF file</span>
<span class="sd">        :param Format: Set to &#39;vcf&#39; to get the results as lines in VCF format</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c"># Parse inputs</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/variantset/{Id}&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{format}&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">queryParams</span><span class="p">[</span><span class="s">&#39;Format&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apiClient</span><span class="o">.</span><span class="n">toPathValue</span><span class="p">(</span><span class="n">Format</span><span class="p">)</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">VariantsHeaderResponse</span><span class="o">.</span><span class="n">VariantsHeaderResponse</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span>\
                                      <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    </div>
<div class="viewcode-block" id="BaseSpaceAPI.filterVariantSet"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.filterVariantSet">[docs]</a>    <span class="k">def</span> <span class="nf">filterVariantSet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Id</span><span class="p">,</span> <span class="n">Chrom</span><span class="p">,</span> <span class="n">StartPos</span><span class="p">,</span> <span class="n">EndPos</span><span class="p">,</span> <span class="n">Format</span><span class="p">,</span> <span class="n">queryPars</span><span class="o">=</span><span class="n">qp</span><span class="p">(</span><span class="n">pars</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;SortBy&#39;</span><span class="p">:</span><span class="s">&#39;Position&#39;</span><span class="p">})):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        List the variants in a set of variants. Maximum returned records is 1000</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The id of the variant file </span>
<span class="sd">        :param Chrom: The chromosome of interest</span>
<span class="sd">        :param StartPos: The start position of the sequence of interest</span>
<span class="sd">        :param EndPos: The start position of the sequence of interest</span>
<span class="sd">        :param Format: Set to &#39;vcf&#39; to get the results as lines in VCF format</span>
<span class="sd">        :param queryPars: An (optional) object of type QueryParameters for custom sorting and filtering</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c"># Parse inputs</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/variantset/{Id}/variants/chr{Chrom}&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{format}&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">queryPars</span><span class="o">.</span><span class="n">validate</span><span class="p">()</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="n">queryPars</span><span class="o">.</span><span class="n">getParameterDict</span><span class="p">()</span>
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">queryParams</span><span class="p">[</span><span class="s">&#39;StartPos&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">StartPos</span>
        <span class="n">queryParams</span><span class="p">[</span><span class="s">&#39;EndPos&#39;</span><span class="p">]</span>   <span class="o">=</span> <span class="n">EndPos</span>
        <span class="n">queryParams</span><span class="p">[</span><span class="s">&#39;Format&#39;</span><span class="p">]</span>   <span class="o">=</span> <span class="n">Format</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Chrom}&#39;</span><span class="p">,</span> <span class="n">Chrom</span><span class="p">)</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__listRequest__</span><span class="p">(</span><span class="n">Variant</span><span class="o">.</span><span class="n">Variant</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    </div>
<div class="viewcode-block" id="BaseSpaceAPI.getIntervalCoverage"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getIntervalCoverage">[docs]</a>    <span class="k">def</span> <span class="nf">getIntervalCoverage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">Chrom</span><span class="p">,</span> <span class="n">StartPos</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">EndPos</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Mean coverage levels over a sequence interval</span>
<span class="sd">        </span>
<span class="sd">        :param Id: Chromosome to query</span>
<span class="sd">        :param Chrom: The Id of the resource</span>
<span class="sd">        :param StartPos: Get coverage starting at this position. Default is 1</span>
<span class="sd">        :param EndPos: Get coverage up to and including this position. Default is StartPos + 1280</span>
<span class="sd">        </span>
<span class="sd">        :return:CoverageResponse -- an instance of CoverageResponse</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c"># Parse inputs</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/coverage/{Id}/{Chrom}&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{format}&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">queryParams</span><span class="p">[</span><span class="s">&#39;StartPos&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apiClient</span><span class="o">.</span><span class="n">toPathValue</span><span class="p">(</span><span class="n">StartPos</span><span class="p">)</span>
        <span class="n">queryParams</span><span class="p">[</span><span class="s">&#39;EndPos&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apiClient</span><span class="o">.</span><span class="n">toPathValue</span><span class="p">(</span><span class="n">EndPos</span><span class="p">)</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Chrom}&#39;</span><span class="p">,</span> <span class="n">Chrom</span><span class="p">)</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">CoverageResponse</span><span class="o">.</span><span class="n">CoverageResponse</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span>\
                                      <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BaseSpaceAPI.getCoverageMetaInfo"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.getCoverageMetaInfo">[docs]</a>    <span class="k">def</span> <span class="nf">getCoverageMetaInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">Chrom</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns Metadata about coverage as a CoverageMetadata instance</span>
<span class="sd">        </span>
<span class="sd">        :param Id: he Id of the Bam file </span>
<span class="sd">        :param Chrom: Chromosome to query</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c"># Parse inputs</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/coverage/{Id}/{Chrom}/meta&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{format}&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Chrom}&#39;</span><span class="p">,</span> <span class="n">Chrom</span><span class="p">)</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">CoverageMetaResponse</span><span class="o">.</span><span class="n">CoverageMetaResponse</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span>\
                                      <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
     </div>
<div class="viewcode-block" id="BaseSpaceAPI.createAppResult"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.createAppResult">[docs]</a>    <span class="k">def</span> <span class="nf">createAppResult</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Id</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">desc</span><span class="p">,</span><span class="n">appSessionId</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Create an analysis object</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The id for the project in which the analysis is to be added</span>
<span class="sd">        :param name: The name of the analysis</span>
<span class="sd">        :param desc: A describtion of the analysis</span>
<span class="sd">        :param appSessionId: (Optional) If not appSessionId is used the one used to initialize the BaseSpaceAPI instance</span>
<span class="sd">        will be used. If appSessionId is set equal an empty string, a new appsession we be created for the </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c"># Parse inputs</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/projects/{ProjectId}/appresults&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{format}&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;POST&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{ProjectId}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">appSessionId</span><span class="p">:</span> <span class="n">queryParams</span><span class="p">[</span><span class="s">&#39;appsessionid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">appSessionId</span>
        <span class="k">if</span> <span class="n">appSessionId</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span> <span class="n">queryParams</span><span class="p">[</span><span class="s">&#39;appsessionid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">appSessionId</span> <span class="c"># default case</span>
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">postData</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">postData</span><span class="p">[</span><span class="s">&#39;Name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>
        <span class="n">postData</span><span class="p">[</span><span class="s">&#39;Description&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">desc</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">AppResultResponse</span><span class="o">.</span><span class="n">AppResultResponse</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span><span class="n">postData</span><span class="o">=</span><span class="n">postData</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            </div>
<div class="viewcode-block" id="BaseSpaceAPI.appResultFileUpload"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.appResultFileUpload">[docs]</a>    <span class="k">def</span> <span class="nf">appResultFileUpload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Id</span><span class="p">,</span> <span class="n">localPath</span><span class="p">,</span> <span class="n">fileName</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="n">contentType</span><span class="p">,</span> <span class="n">multipart</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Uploads a file associated with an analysis to BaseSpace and returns the corresponding file object  </span>
<span class="sd">        </span>
<span class="sd">        :param Id: Analysis id.</span>
<span class="sd">        :param localPath: The local path to the file to be uploaded.</span>
<span class="sd">        :param fileName: The desired filename in the Analysis folder on the BaseSpace server.</span>
<span class="sd">        :param directory: The directory the file should be placed in.</span>
<span class="sd">        :param contentType: The content-type of the file.</span>
<span class="sd">         </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/appresults/{Id}/files&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{format}&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;POST&#39;</span>
        <span class="n">resourcePath</span>                 <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>
        <span class="n">queryParams</span>                  <span class="o">=</span> <span class="p">{}</span>
        <span class="n">queryParams</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">]</span>          <span class="o">=</span> <span class="n">fileName</span>
        <span class="n">queryParams</span><span class="p">[</span><span class="s">&#39;directory&#39;</span><span class="p">]</span>     <span class="o">=</span> <span class="n">directory</span> 
        <span class="n">headerParams</span>                 <span class="o">=</span> <span class="p">{}</span>
        <span class="n">headerParams</span><span class="p">[</span><span class="s">&#39;Content-Type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">contentType</span>
        <span class="c"># three cases, two for multipart, starting </span>
        <span class="k">if</span> <span class="n">multipart</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">queryParams</span><span class="p">[</span><span class="s">&#39;multipart&#39;</span><span class="p">]</span>          <span class="o">=</span> <span class="s">&#39;true&#39;</span>
            <span class="n">postData</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="c"># Set force post as this need to use POST though no data is being streamed</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">FileResponse</span><span class="o">.</span><span class="n">FileResponse</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span>\
                                      <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span><span class="n">postData</span><span class="o">=</span><span class="n">postData</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">forcePost</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">multipart</span><span class="o">==</span><span class="mi">2</span><span class="p">:</span>
            <span class="n">queryParams</span>          <span class="o">=</span> <span class="p">{</span><span class="s">&#39;uploadstatus&#39;</span><span class="p">:</span><span class="s">&#39;complete&#39;</span><span class="p">}</span>
            <span class="n">postData</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="c"># Set force post as this need to use POST though no data is being streamed</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">FileResponse</span><span class="o">.</span><span class="n">FileResponse</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span>\
                                      <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span><span class="n">postData</span><span class="o">=</span><span class="n">postData</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">forcePost</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">postData</span>                     <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">localPath</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">FileResponse</span><span class="o">.</span><span class="n">FileResponse</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span>\
                                      <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span><span class="n">postData</span><span class="o">=</span><span class="n">postData</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BaseSpaceAPI.fileDownload"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.fileDownload">[docs]</a>    <span class="k">def</span> <span class="nf">fileDownload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Id</span><span class="p">,</span><span class="n">localDir</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="nb">range</span><span class="o">=</span><span class="p">[]):</span> <span class="c">#@ReservedAssignment</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Downloads a BaseSpace file to a local directory</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The file id</span>
<span class="sd">        :param localDir: The local directory to place the file in</span>
<span class="sd">        :param name: The name of the local file</span>
<span class="sd">        :param range: (Optional) The byte range of the file to retrieve (not yet implemented)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/files/{Id}/content&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{format}&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;GET&#39;</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>
        <span class="n">queryParams</span><span class="p">[</span><span class="s">&#39;redirect&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;meta&#39;</span> <span class="c"># we need to add this parameter to get the Amazon link directly </span>
        
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apiClient</span><span class="o">.</span><span class="n">callAPI</span><span class="p">(</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span><span class="bp">None</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">response</span><span class="p">[</span><span class="s">&#39;ResponseStatus&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="s">&#39;ErrorCode&#39;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">&#39;BaseSpace error: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="s">&#39;ResponseStatus&#39;</span><span class="p">][</span><span class="s">&#39;ErrorCode&#39;</span><span class="p">])</span> <span class="o">+</span> <span class="s">&quot;: &quot;</span> <span class="o">+</span> <span class="n">response</span><span class="p">[</span><span class="s">&#39;ResponseStatus&#39;</span><span class="p">][</span><span class="s">&#39;Message&#39;</span><span class="p">])</span>
        
        <span class="c"># get the Amazon URL </span>
        <span class="n">fileUrl</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s">&#39;Response&#39;</span><span class="p">][</span><span class="s">&#39;HrefContent&#39;</span><span class="p">]</span>
        <span class="n">req</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">fileUrl</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">range</span><span class="p">):</span>
<span class="c">#            print &quot;Case range request&quot; </span>
            <span class="n">req</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s">&#39;Range&#39;</span><span class="p">]</span><span class="o">=</span><span class="s">&#39;bytes=</span><span class="si">%s</span><span class="s">-</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">range</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">range</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        
        <span class="c"># Do the download</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">localDir</span> <span class="o">+</span> <span class="n">name</span><span class="p">,</span> <span class="s">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
            <span class="n">shutil</span><span class="o">.</span><span class="n">copyfileobj</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="n">fp</span><span class="p">)</span>
        <span class="k">return</span> <span class="mi">1</span>

<span class="c">#    def largeFileDownload(self):</span>
<span class="c">#        &#39;&#39;&#39;</span>
<span class="c">#        Not yet implemented</span>
<span class="c">#        &#39;&#39;&#39;</span>
<span class="c">#        raise Exception(&#39;Not yet implemented&#39;)</span>
            </div>
    <span class="k">def</span> <span class="nf">__uploadMultipartUnit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Id</span><span class="p">,</span><span class="n">partNumber</span><span class="p">,</span><span class="n">md5</span><span class="p">,</span><span class="n">data</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Helper method, do not call</span>
<span class="sd">        </span>
<span class="sd">        :param Id: file id </span>
<span class="sd">        :param partNumber: the file part to be uploaded</span>
<span class="sd">        :param md5: md5 sum of datastream</span>
<span class="sd">        :param data: the data-stream to be uploaded</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">resourcePath</span>                 <span class="o">=</span> <span class="s">&#39;/files/{Id}/parts/{partNumber}&#39;</span>
        <span class="n">resourcePath</span>                 <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{format}&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">)</span>
        <span class="n">method</span>                       <span class="o">=</span> <span class="s">&#39;PUT&#39;</span>
        <span class="n">resourcePath</span>                 <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>
        <span class="n">resourcePath</span>                 <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{partNumber}&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">partNumber</span><span class="p">))</span>
        <span class="n">queryParams</span>                  <span class="o">=</span> <span class="p">{}</span>
        <span class="n">headerParams</span>                 <span class="o">=</span> <span class="p">{</span><span class="s">&#39;Content-MD5&#39;</span><span class="p">:</span><span class="n">md5</span><span class="o">.</span><span class="n">strip</span><span class="p">()}</span>
        <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apiClient</span><span class="o">.</span><span class="n">callAPI</span><span class="p">(</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">queryParams</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">headerParams</span><span class="o">=</span><span class="n">headerParams</span><span class="p">,</span><span class="n">forcePost</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">out</span>
<span class="c">#        curl -v -H &quot;x-access-token: {access token}&quot; \</span>
<span class="c">#        -H &quot;Content-MD5: 9mvo6qaA+FL1sbsIn1tnTg==&quot; \</span>
<span class="c">#        -T reportarchive.zipaa \</span>
<span class="c">#        -X PUT https://api.cloud-endor.illumina.com/v1pre2/files/7094087/parts/1</span>
    
<div class="viewcode-block" id="BaseSpaceAPI.multipartFileUpload"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.multipartFileUpload">[docs]</a>    <span class="k">def</span> <span class="nf">multipartFileUpload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Id</span><span class="p">,</span> <span class="n">localPath</span><span class="p">,</span> <span class="n">fileName</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="n">contentType</span><span class="p">,</span> <span class="n">tempdir</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span><span class="n">cpuCount</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">partSize</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Method for multi-threaded file-upload for parallel transfer of very large files (currently only runs on unix systems)</span>
<span class="sd">        </span>
<span class="sd">        </span>
<span class="sd">        :param Id: The analysis ID</span>
<span class="sd">        :param localPath: The local path of the file to be uploaded</span>
<span class="sd">        :param fileName: The desired filename on the server</span>
<span class="sd">        :param directory: The server directory to place the file in (empty string will place it in the root directory)</span>
<span class="sd">        :param contentType: The content type of the file</span>
<span class="sd">        :param tempdir: Temp directory to use, if blank the directory for &#39;localPath&#39; will be used</span>
<span class="sd">        :param cpuCount: The number of CPUs to be used</span>
<span class="sd">        :param partSize: The size of individual upload parts (must be between 5 and 25mb)</span>
<span class="sd">        :param verbose: Write process output to stdout as upload progresses</span>
<span class="sd">        &#39;&#39;&#39;</span>
 
        <span class="c"># Create file object on server</span>
        <span class="n">myFile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysisFileUpload</span><span class="p">(</span><span class="n">Id</span><span class="p">,</span> <span class="n">localPath</span><span class="p">,</span> <span class="n">fileName</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="n">contentType</span><span class="p">,</span><span class="n">multipart</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        
        <span class="c"># prepare multi-par upload objects</span>
        <span class="n">myMpu</span> <span class="o">=</span> <span class="n">mpu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Id</span><span class="p">,</span><span class="n">localPath</span><span class="p">,</span><span class="n">myFile</span><span class="p">,</span><span class="n">cpuCount</span><span class="p">,</span><span class="n">partSize</span><span class="p">,</span><span class="n">tempdir</span><span class="o">=</span><span class="n">tempdir</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">myMpu</span>
</div>
    <span class="k">def</span> <span class="nf">markFileState</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Id</span><span class="p">):</span>
        <span class="k">pass</span>

<div class="viewcode-block" id="BaseSpaceAPI.setAppSessionState"><a class="viewcode-back" href="../../../Available modules.html#BaseSpacePy.api.BaseSpaceAPI.BaseSpaceAPI.setAppSessionState">[docs]</a>    <span class="k">def</span> <span class="nf">setAppSessionState</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Id</span><span class="p">,</span><span class="n">Status</span><span class="p">,</span><span class="n">Summary</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Set the status of an Analysis object</span>
<span class="sd">        </span>
<span class="sd">        :param Id: The id of the analysis</span>
<span class="sd">        :param Status: The status assignment string must</span>
<span class="sd">        :param Summary: The summary string</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c"># Parse inputs</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="s">&#39;/appsessions/{Id}&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{format}&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s">&#39;POST&#39;</span>
        <span class="n">resourcePath</span> <span class="o">=</span> <span class="n">resourcePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;{Id}&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>
        <span class="n">queryParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">headerParams</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">postData</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">statusAllowed</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;running&#39;</span><span class="p">,</span> <span class="s">&#39;complete&#39;</span><span class="p">,</span> <span class="s">&#39;needsattention&#39;</span><span class="p">,</span> <span class="s">&#39;aborted&#39;</span><span class="p">,</span><span class="s">&#39;error&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">Status</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">statusAllowed</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">&quot;Analysis state must be in &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">statusAllowed</span><span class="p">))</span>
        <span class="n">postData</span><span class="p">[</span><span class="s">&#39;status&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="n">postData</span><span class="p">[</span><span class="s">&#39;statussummary&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Summary</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__singleRequest__</span><span class="p">(</span><span class="n">AppSessionResponse</span><span class="o">.</span><span class="n">AppSessionResponse</span><span class="p">,</span><span class="n">resourcePath</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span>\
                                      <span class="n">queryParams</span><span class="p">,</span> <span class="n">headerParams</span><span class="p">,</span><span class="n">postData</span><span class="o">=</span><span class="n">postData</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c">#        deprecated        </span>
<span class="c">#    def setAppResultState(self,Id,Status,Summary):</span>
<span class="c">#        &#39;&#39;&#39;</span>
<span class="c">#        Set the status of an Analysis object</span>
<span class="c">#        </span>
<span class="c">#        :param Id: The id of the analysis</span>
<span class="c">#        :param Status: The status assignment string must</span>
<span class="c">#        :param Summary: The summary string</span>
<span class="c">#        &#39;&#39;&#39;</span>
<span class="c">#        # Parse inputs</span>
<span class="c">#        resourcePath = &#39;/appresults/{Id}&#39;</span>
<span class="c">#        resourcePath = resourcePath.replace(&#39;{format}&#39;, &#39;json&#39;)</span>
<span class="c">#        method = &#39;POST&#39;</span>
<span class="c">#        resourcePath = resourcePath.replace(&#39;{Id}&#39;, Id)</span>
<span class="c">#        queryParams = {}</span>
<span class="c">#        headerParams = {}</span>
<span class="c">#        postData = {}</span>
<span class="c">#        statusAllowed = [&#39;running&#39;, &#39;complete&#39;, &#39;needattention&#39;, &#39;aborted&#39;,&#39;error&#39;]</span>
<span class="c">#        if not Status.lower() in statusAllowed:</span>
<span class="c">#            raise Exception(&quot;Analysis state must be in &quot; + str(statusAllowed))</span>
<span class="c">#        postData[&#39;status&#39;] = Status.lower()</span>
<span class="c">#        postData[&#39;statussummary&#39;] = Summary</span>
<span class="c">#        return self.__singleRequest__(AppResultResponse.AppResultResponse,resourcePath, method,\</span>
<span class="c">#                                      queryParams, headerParams,postData=postData,verbose=0)</span></div></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li><a href="../../../index.html">BaseSpacePy 0.1 documentation</a> &raquo;</li>
          <li><a href="../../index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Morten Kallberg.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>